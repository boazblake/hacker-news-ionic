!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,u=i.length;a<u;a++)r=i[a],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t){return function(r){var n=a(u(t),r);return e.require(n,t)}},d=function(e,t){var n=g&&g.createHot(e),i={id:e,exports:{},hot:n};return r[e]=i,t(i.exports,c(e),i),i.exports},s=function(e){var t=n[e];return t&&e!==t?s(t):e},f=function(e,t){return s(a(u(e),t))},l=function(e,n){null==n&&(n="/");var o=s(e);if(i.call(r,o))return r[o].exports;if(i.call(t,o))return d(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};l.alias=function(e,t){n[t]=e};var m=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/,p=function(e){if(m.test(e)){var t=e.replace(m,"");i.call(n,t)&&n[t].replace(m,"")!==t+"/index"||(n[t]=e)}if(v.test(e)){var r=e.replace(v,"");i.call(n,r)||(n[r]=e)}};l.register=l.define=function(e,n){if(e&&"object"==typeof e)for(var o in e)i.call(e,o)&&l.register(o,e[o]);else t[e]=n,delete r[e],p(e)},l.list=function(){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};var g=e._hmr&&new e._hmr(f,l,t,r);l._cache=r,l.hmr=g&&g.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window?this:window;require.register("app.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var i=n(t("./layout.js")),o=n(t("./home.js")),a=n(t("./picture.js")),u=n(t("./idmaker.js")),c=function(e){return{"/home":{onmatch:function(){e.page="ID Cards"},render:function(){return m(i["default"],{mdl:e},m(o["default"],{mdl:e}))}},"/addcard":{onmatch:function(){e.page="Add New Card"},render:function(){return m(i["default"],{mdl:e},m(u["default"],{mdl:e}))}},"/picture":{onmatch:function(){e.page="".concat(e.side,"picture")},render:function(){return m(i["default"],{mdl:e},m(a["default"],{mdl:e}))}},"/:idcard":{onmatch:function(){!e.card.name&&m.route.set("/home"),e.page=e.card.name},render:function(){return m(i["default"],{mdl:e},m(u["default"],{mdl:e}))}}}},d=c;e["default"]=d}),require.register("home.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(e){var t=e.attrs.mdl,r=function(e){t.card=e,console.log(t,e),m.route.set("/".concat(e.name))};return{view:function(e){var t=e.attrs.card;return m(".card",{onclick:function(){return r(t)}},[m("label",t.name),m("img",{width:100,src:t.front.src})])}}},i=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&m.route.set("/addcard")},o=function(e){e.card.front=void 0,e.card.back=void 0,e.card.name=void 0},a=function(e){var t=e.attrs.mdl;return{oninit:function(){return o(t)},view:function(e){var t=e.attrs.mdl;return m(".container.columns",[t.idCards&&t.idCards.map(function(e){return m(n,{mdl:t,card:e})}),m("button.empty.col-12",{onclick:i},[m(".icon icon-photo"),m("p","Add a New Card")])])}}},u=a;e["default"]=u}),require.register("idmaker.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(e){var t=e.attrs.mdl;t.state={name:t.state.name?t.state.name:t.card.name,back:t.card.back,front:t.card.front};var r=function(e,t){t.side=e,m.route.set("/picture")},n=function(e){t.idCards.push(e),m.route.set("/home")},i=function(e,t,r){e.getContext("2d").drawImage(t.card[r],0,0)},o=function(e,t){t.side=e,m.route.set("/picture")};return{view:function(e){var t=e.attrs.mdl;return m(".container.columns",{id:"idmaker"},[m(".form-group",[m("label","NAME: "),m("input",{type:"text",value:t.state.name,oninput:function(e){return t.state.name=e.target.value}})]),m(".column.col-12",t.state.front?m("canvas.id-preview",{oncreate:function(e){var r=e.dom;return i(r,t,"front")},onclick:function(){return o("front",t)}}):m(".card.empty",{onclick:function(e){return r("front",t)}},[m(".icon icon-photo"),m("p","Add Front")])),m(".column.col-12",t.state.back?m("canvas.id-preview",{oncreate:function(e){var r=e.dom;return i(r,t,"back")},onclick:function(){return o("back",t)}}):m(".card.empty",{onclick:function(){return r("back",t)}},[m(".icon icon-photo"),m("p","Add Back")])),m("button.btn.btn-lg",{onclick:function(e){return n(t.state)}},"SAVE")])}}},i=n;e["default"]=i}),require.register("index.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=n(t("./app.js")),o=n(t("./model.js")),a=document.body,u=window.innerWidth;r.hot&&r.hot.accept(),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("./service-worker.js").then(function(e){console.log("⚙️ SW registered: ",e)})["catch"](function(e){console.log("🧟 SW registration failed: ",e)})});var c=function(e){return e<668?"phone":e<920?"tablet":"desktop"},d=function s(e){var t=window.innerWidth;if(e!==t){e=t;var r=o["default"].settings.profile;o["default"].settings.profile=c(t),r!=o["default"].settings.profile&&m.redraw()}return requestAnimationFrame(s)};o["default"].settings.profile=c(u),d(u),m.route(a,"/home",(0,i["default"])(o["default"]))}),require.register("initialize.js",function(e,t,r){"use strict";document.addEventListener("DOMContentLoaded",function(){t("./index.js")})}),require.register("layout.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(){var e=function(e){return e.name?m.route.set("/".concat(e.name)):m.route.set("/addcard")};return{view:function(t){var r=t.attrs.mdl;return m(".header",["/home"!==m.route.get()&&m("button.btn",{onclick:function(){return m.route.set("/home")}},"HOME"),"/addcard"!==m.route.get()&&"/home"!==m.route.get()&&m("button.btn",{onclick:function(t){return e(r)}},"BACK"),r.page])}}},i=function(){return{view:function(e){var t=e.children,r=e.attrs.mdl;return m(".container",[m(n,{mdl:r}),t,m("pre",JSON.stringify(r,null,4))])}}},o=i;e["default"]=o}),require.register("model.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n={state:{},settings:{},page:"",idCards:[],stream:void 0,card:{front:void 0,back:void 0,name:void 0}},i=n;e["default"]=i}),require.register("picture.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n={view:function(){return m("svg",{viewBox:"0 0 100 100",id:"picture-overlay"},[m("path",{d:"M-25,10 L-50,10 L-50,35",fill:"none",stroke:"white","stroke-width":"3"}),m("path",{d:"M-50,65 L-50,90 L-25,90",fill:"none",stroke:"white","stroke-width":"3"}),m("path",{d:"M125,90 L150,90 L150,65",fill:"none",stroke:"white","stroke-width":"3"}),m("path",{d:"M150,35 L150,10 L125,10",fill:"none",stroke:"white","stroke-width":"3"})])}},i=function(e,t){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:{width:670,height:300,facingMode:{camera:"environment"}}}).then(function(r){t.stream=r,e.srcObject=r,e.play(),t.video=e},function(e){return console.log(e)})},o=function(e){var t=new Image,r=document.createElement("canvas");r.getContext("2d").drawImage(e.video,0,0,200,100),t.src=r.toDataURL("image/webp"),e.card[e.side]=t,m.route.set("/addcard")},a=function(){return{view:function(e){var t=e.attrs.mdl;return m(".container",[m("",{id:"picture-container"},[m("video",{id:"video",oncreate:function(e){var r=e.dom;return i(r,t)},autoplay:!0,playsinline:!0}),m(n)]),m("button",{onclick:function(){return o(t)}},"Save")])},onremove:function(e){var t=e.attrs.mdl;return t.stream.getTracks().forEach(function(e){e.stop()})}}},u=a;e["default"]=u}),require.register("___globals___",function(e,t,r){window.m=t("mithril"),window.Stream=t("mithril-stream")})}(),require("___globals___");