{"version":3,"sources":["app/app.js","app/components/action-sheet.js","app/components/comment.js","app/components/ionic-router.js","app/components/layout.js","app/components/modal.js","app/components/popover.js","app/components/post.js","app/components/toast.js","app/components/user-modal.js","app/index.js","app/initialize.js","app/model.js","app/pages/comments.js","app/pages/posts.js","app/utils/animations.js","app/utils/index.js"],"names":["match","mdl","path","title","key","split","_","route","state","id","routes","find","makeRoutes","component","name","onmatch","params","render","m","Layout","App","reduce","showSettings","showAction","actionSheetController","create","header","buttons","handler","mode","document","body","classList","toggle","window","matchMedia","text","then","x","present","showComments","level","comment","Comment","onremove","attrs","console","log","view","comments","comments_count","time_ago","content","user","style","minWidth","onclick","e","toggleUser","color","trust","markup","expand","toggleComments","slot","map","c","idx","ionicRouter","from","to","r","root","url","Header","defaultHref","set","prev","toUpperCase","size","Footer","Routes","filter","length","tab","icon","children","fullscreen","Modal","dom","dismiss","dismissed","oncreate","data","modalController","showBackdrop","backdropDismiss","cssClass","animated","swipeToClose","keyboardClose","modal","oninit","init","close","clot","contents","Popover","popoverController","event","Post","post","domain","points","detail","lines","target","href","rel","Toast","toastController","message","toast","msg","duration","showCloseButton","status","UserModel","getUser","created","about","karma","module","hot","accept","process","env","NODE_ENV","navigator","addEventListener","serviceWorker","register","registration","registrationError","getProfile","w","winW","innerWidth","model","profile","checkWidth","lastProfile","redraw","requestAnimationFrame","require","page","urls","req","http","request","method","reqs","getPosts","getDataById","getPath","Stream","tabsShowing","showModal","showUser","showPopover","toggleModal","togglePopover","MarkdownIt","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","getComments","Comments","onSuccess","onError","onionRefresh","setTimeout","complete","pullingIcon","loadingSpinner","pullingText","closeDuration","Posts","item","pos","scrollToPoint","scrollEvents","onionScroll","currentY","_post","onionInfinite","concat","threshold","loadingText","animateComponentEntrance","opacity","animateHeaderEntrance","animateModalEntrance","animateFooterEntrance","animateChildrenEntrance","child","animateChildrenLimitsEntrance","animate","dir","slideOutAnimation","Promise","remove","animateChildrenLimitsExit","reverse","display"],"mappings":"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","file":"docs/app.js","sourcesContent":["import { prop, propEq } from \"ramda\"\nimport Layout from \"./components/layout.js\"\n\nconst match = (mdl) => ({ title, key }, path) => {\n  let [_, route] = path.split(\"/\")\n  mdl.state.route = route\n  mdl.state.path = path\n  if (key) {\n    mdl.state.title(title)\n    mdl.state.id(key)\n  } else {\n    mdl.state.title(prop(\"title\", mdl.routes.find(propEq(\"name\", route))))\n    mdl.state.id(null)\n  }\n}\n\nconst makeRoutes = (mdl) => (routes, { component, name }) => {\n  routes[`/${name}`] = {\n    onmatch: (params, path) => match(mdl)(params, path),\n    render: () => m(Layout, { mdl }, m(component, { key: name, mdl })),\n  }\n  return routes\n}\n\nexport const App = (mdl) => mdl.routes.reduce(makeRoutes(mdl), {})\n","import { actionSheetController } from \"@ionic/core\"\n\nexport const showSettings = (mdl) => {\n  const showAction = () => {\n    actionSheetController\n      .create({\n        header: \"Settings\",\n        buttons: [\n          {\n            handler: () => {\n              mdl.state.mode = mdl.state.mode == \"light\" ? \"dark\" : \"light\"\n              document.body.classList.toggle(\"dark\")\n              window.matchMedia(\"(prefers-color-scheme: dark)\")\n            },\n            text:\n              mdl.state.mode == \"light\"\n                ? \"Enter Dark Mode\"\n                : \"Enter Light Mode\",\n          },\n        ],\n      })\n      .then((x) => x.present())\n  }\n  showAction()\n}\n","const showComments = (mdl, key, level) =>\n  mdl.state.comment[`${key}-${level}`] || false\n\nconst Comment = {\n  onremove: ({ attrs: { mdl } }) => {\n    console.log(\"mdl.state\", mdl.state)\n    mdl.state.comment = {}\n  },\n  view: ({\n    attrs: {\n      key,\n      mdl,\n      comment: { comments, comments_count, time_ago, content, level, user },\n    },\n  }) => {\n    return m(\n      \"ion-card\",\n      {\n        style: { minWidth: \"60vw\" },\n      },\n      m(\n        \"ion-card-header\",\n        m(\n          \"ion-grid\",\n          m(\n            \"ion-row.ion-justify-content-center.ion-align-items-center\",\n            m(\n              \"ion-col.\",\n              m(\n                \"ion-chip\",\n                {\n                  onclick: (e) => mdl.toggleUser(mdl)(user, e),\n                  color: \"primary\",\n                },\n                user\n              )\n            ),\n            m(\"ion-col.\", m(\"ion-note\", time_ago))\n          )\n        )\n      ),\n      m(\n        \"ion-card-content\",\n        m.trust(mdl.markup.render(content)),\n        comments_count\n          ? m(\n              \"ion-button\",\n              {\n                expand: \"full\",\n                onclick: () => mdl.toggleComments({ mdl, key, level }),\n              },\n              [\n                `${comments_count} comments`,\n                showComments(mdl, key, level)\n                  ? m(\"ion-icon\", { slot: \"end\", name: \"chevron-up-outline\" })\n                  : m(\"ion-icon\", {\n                      slot: \"end\",\n                      name: \"chevron-down-outline\",\n                    }),\n              ]\n            )\n          : null,\n        showComments(mdl, key, level) &&\n          comments.map((c, idx) =>\n            m(Comment, {\n              key: idx,\n              comment: c,\n              mdl,\n            })\n          )\n      )\n    )\n  },\n}\n\nexport default Comment\n","const ionicRouter = () =>\n  m(\n    \"ion-router\",\n    m(\"ion-route-redirect\", { from: \"!\", to: \"#!\" }),\n    mdl.routes.map((r) => {\n      console.log(\"r\", `${r.name}`),\n        [\n          m(\"ion-route-redirect\", {\n            from: `!/${r.name}`,\n            to: `#!/${r.name}`,\n          }),\n          m(\"ion-route\", {\n            root: \"#/!\",\n            url: `#!/${r.name}`,\n            component: r.name,\n          }),\n        ]\n    })\n  )\n","import { showSettings } from \"./action-sheet\"\nimport Modal from \"./modal.js\"\n\nconst Header = {\n  view: ({ attrs: { mdl } }) => {\n    return m(\n      \"ion-header\",\n      m(\n        \"ion-toolbar.ion-justify-content-center.ion-align-items-center\",\n        mdl.state.id()\n          ? [\n              m(\n                \"ion-back-button\",\n                {\n                  text: \"\",\n                  slot: \"start\",\n                  defaultHref: \"/news\",\n                  onclick: (e) => {\n                    m.route.set(mdl.state.prev)\n                  },\n                },\n                mdl.state.route\n              ),\n              m(\n                \"ion-sub-title.ion-text-center.ion-text-wrap\",\n                m(\n                  \"ion-label\",\n                  m(\"ion-text\", m(\"p\", mdl.state.title().toUpperCase()))\n                )\n              ),\n            ]\n          : m(\n              \"ion-title.ion-text-center.ion-text-wrap\",\n              { size: \"large\" },\n              m(\"ion-text\", m(\"h1\", mdl.state.title().toUpperCase()))\n            )\n      )\n    )\n  },\n}\n\nconst Footer = ({ attrs: { mdl } }) => {\n  const Routes = mdl.routes.filter((r) => r.name.split(\"/\").length == 1)\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \"ion-footer.ion-no-border\",\n        { slot: \"bottom\" },\n        m(\n          \"ion-tabs\",\n          ...Routes.map(({ name }) => m(\"ion-tab\", { tab: `${name}` })),\n          m(\"ion-tab-bar\", { slot: \"bottom\" }, [\n            ...Routes.map(({ title, name, icon }) =>\n              m(\n                \"ion-tab-button\",\n                {\n                  onclick: () => {\n                    mdl.state.id(null)\n                    m.route.set(`/${name}`)\n                  },\n                  tab: `${name}`,\n                },\n                [\n                  m(\"ion-label\", title.toUpperCase()),\n                  m(\"ion-icon\", { name: icon }),\n                ]\n              )\n            ),\n            m(\n              \"ion-tab-button\",\n              {\n                onclick: () => showSettings(mdl),\n              },\n              [m(\"ion-icon\", { name: \"ellipsis-vertical-outline\" })]\n            ),\n          ])\n        )\n      )\n    },\n  }\n}\n\nconst Layout = ({ attrs: { mdl } }) => {\n  return {\n    view: ({ children }) =>\n      m(\n        \"ion-app\",\n        children &&\n          m(\"ion-page\", [\n            m(Header, { mdl }),\n            m(\"ion-content\", { fullscreen: true }, children),\n            m(Footer, { mdl }),\n          ])\n      ),\n  }\n}\n\nexport default Layout\n","import { modalController } from \"@ionic/core\"\r\n\r\nconst Modal = ({ attrs: { mdl } }) => ({\r\n  onremove: ({ dom }) =>\r\n    dom.dismiss({\r\n      dismissed: true,\r\n    }),\r\n  oncreate: ({ dom }) => {\r\n    console.log(mdl)\r\n    mdl.data.user.data &&\r\n      modalController\r\n        .create({\r\n          component: dom,\r\n          showBackdrop: true,\r\n          backdropDismiss: true,\r\n          cssClass: \"\",\r\n          animated: true,\r\n          swipeToClose: true,\r\n          keyboardClose: true,\r\n          id: mdl.state.user.id,\r\n        })\r\n        .then((modal) => modal.present())\r\n  },\r\n  oninit: ({ attrs: { mdl } }) => mdl.modal.init(mdl),\r\n  view: ({ attrs: { mdl } }) =>\r\n    m(\r\n      \"ion-modal\",\r\n      m(\r\n        \"ion-header\",\r\n        m(\r\n          \"ion-toolbar\",\r\n\r\n          m(\"ion-title\", mdl.modal.title()),\r\n          m(\r\n            \"ion-buttons\",\r\n            { slot: \"primary\", onclick: () => mdl.modal.close() },\r\n            m(\"ion-icon\", { clot: \"icons-only\", name: \"close\" })\r\n          )\r\n        )\r\n      ),\r\n      m(\"ion-content.ion-padding.has-footer\", mdl.modal.contents())\r\n    ),\r\n})\r\n\r\nexport default Modal\r\n","import { popoverController } from \"@ionic/core\"\n\nconst Popover = () => ({\n  onremove: ({ dom }) =>\n    dom.dismiss({\n      dismissed: true,\n    }),\n  oncreate: ({ attrs: { mdl }, dom }) => {\n    return (\n      mdl.data?.user?.data &&\n      popoverController\n        .create({\n          event: mdl.state.event,\n          component: dom,\n          showBackdrop: true,\n          backdropDismiss: true,\n          cssClass: \"\",\n          animated: true,\n          swipeToClose: true,\n          keyboardClose: true,\n          id: mdl.state.user.id,\n        })\n        .then((modal) => modal.present())\n    )\n  },\n  oninit: ({ attrs: { mdl } }) => mdl.modal.init(mdl),\n  view: ({ attrs: { mdl } }) =>\n    m(\n      \"ion-popover\",\n      m(\"ion-buttons\", m(\"ion-icon\", { slot: \"icons-only\", name: \"close\" })),\n      m(\"\", mdl.modal.title()),\n      // m(\"ion-content.ion-padding\",\n      mdl.modal.contents()\n      //  )\n    ),\n})\n\nexport default Popover\n","const Post = {\n  view: ({\n    attrs: {\n      mdl,\n      post: { comments_count, domain, id, points, time_ago, title, url, user },\n    },\n  }) => {\n    return m(\n      \"ion-item\",\n      {\n        detail: comments_count,\n        lines: \"none\",\n      },\n      m(\n        \"ion-card\",\n        {\n          id: \"post-list-card\",\n          onclick: () => {\n            if (comments_count) {\n              mdl.state.prev = mdl.state.path\n              m.route.set(\"/item/:key\", { key: id, title })\n            }\n          },\n        },\n        m(\"ion-card-header\", m(\"h1\", title)),\n        m(\n          \"ion-card-content\",\n          m(\n            \"ion-grid\",\n            m(\n              \"ion-row\",\n              m(\n                \"ion-link\",\n                \"from \",\n                m(\n                  \"a.\",\n                  { target: \"_blank\", href: url, rel: \"noopener\" },\n                  `${domain}`\n                )\n              )\n            ),\n            m(\n              \"ion-row\",\n              user &&\n                m(\n                  \"ion-label\",\n                  `${time_ago} by `,\n                  m(\n                    \"ion-chip\",\n                    {\n                      slot: \"start\",\n                      color: \"primary\",\n                    },\n                    user\n                  )\n                )\n            )\n          ),\n          m(\n            \"ion-item\",\n            { lines: \"none\" },\n            points && m(\"ion-badge\", { slot: \"end\" }, `${points} pts`),\n            comments_count > 0 &&\n              m(\"ion-badge\", { slot: \"start\" }, `${comments_count} comments`)\n          )\n        )\n      )\n    )\n  },\n}\n\nexport default Post\n","import {toastController} from '@ionic/core'\n\nconst Toast = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m('ion-toast', {\n        oncreate: ({ dom }) => {\n          toastController.create({\n            component: dom,\n            message:mdl.toast.msg(),\n            duration: mdl.toast.duration(),\n            showCloseButton: true,\n            animated: true,\n            color: mdl.toast.status() ? 'success' : 'danger'\n          }).then(toast =>toast.present())\n        },\n      },\n      )\n  }\n}\n\n\n\nexport default Toast\n","const UserModel = {\n  init: (mdl) =>\n    mdl\n      .getUser(mdl, \"user\", mdl.state.user.id)\n      .then((data) => (mdl.data.user = data)),\n  contents: (mdl) =>\n    mdl.data.user && [\n      m(\"code.row\", m(\".bold\", \"id: \"), mdl.data.user.id),\n      m(\"code.row\", m(\".bold\", \"created: \"), mdl.data.user.created),\n      m(\"code.row\", m(\".bold\", \"about: \"), mdl.data.user.about),\n      m(\"code.row\", m(\".bold\", \"karma: \"), mdl.data.user.karma),\n    ],\n}\n\nexport default UserModel\n","import { model } from \"./model.js\"\nimport { App } from \"./app.js\"\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  console.log(\"Looks like we are in development mode!\")\n} else {\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(\"./service-worker.js\")\n        .then((registration) => {\n          console.log(\"SW registered: \", registration)\n        })\n        .catch((registrationError) => {\n          console.log(\"SW registration failed: \", registrationError)\n        })\n    })\n  }\n}\n\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nlet winW = window.innerWidth\nmodel.state.profile = getProfile(winW)\n\nconst checkWidth = () => {\n  const w = window.innerWidth\n  if (winW !== w) {\n    winW = w\n    var lastProfile = model.state.profile\n    model.state.profile = getProfile(w)\n    if (lastProfile != model.state.profile) m.redraw()\n  }\n  requestAnimationFrame(checkWidth)\n}\n\ncheckWidth()\nm.route(document.body, \"/news\", App(model))\nm.route.set(\"/news\")\n","document.addEventListener(\"DOMContentLoaded\", () => {\n  require(\"./index.js\")\n})\n","import Post from \"./pages/posts\"\nimport Comment from \"./pages/comments\"\nimport UserModel from \"./components/user-modal\"\nimport MarkdownIt from \"markdown-it\"\n\nconst routes = [\n  { title: \"news\", name: \"news\", icon: \"newspaper-outline\", component: Post },\n  { title: \"top\", name: \"newest\", icon: \"pulse-outline\", component: Post },\n  {\n    title: \"ask\",\n    name: \"ask\",\n    icon: \"chatbox-ellipses-outline\",\n    component: Post,\n  },\n  { title: \"show\", name: \"show\", icon: \"eye-outline\", component: Post },\n  { title: \"jobs\", name: \"jobs\", icon: \"body-outline\", component: Post },\n  { title: \"\", name: \"item/:key\", icon: null, component: Comment },\n  { title: \"\", name: \"user/:key\", icon: null, component: Comment },\n]\n\nconst url = (route) => (page) => {\n  let path = route.split(\"/\")[0]\n  return `https://api.hnpwa.com/v0/${path}/${page}.json`\n}\n\nconst urls = routes.reduce((req, route) => {\n  req[route.name] = url(route.name)\n  return req\n}, {})\n\nconst http = (url) =>\n  m.request({\n    url,\n    method: \"GET\",\n  })\n\nconst reqs = {\n  urls,\n  http,\n}\n\nconst getPosts = (mdl, route) =>\n  http(mdl.reqs.urls[route](mdl.data[mdl.state.route].page))\n\nconst getDataById = (mdl, route, id) => http(mdl.reqs.urls[`${route}/:key`](id))\n\nconst getPath = (route) => route.split(\"/\")[1]\n\nconst state = {\n  id: Stream(null),\n  title: Stream(null),\n  key: \"\",\n  url: \"\",\n  route: \"\",\n  profile: \"\",\n  tabsShowing: false,\n  comment: {},\n  showModal: false,\n  showUser: false,\n  showPopover: false,\n  event: null,\n  user: { id: \"\" },\n  mode: \"light\",\n}\n\nconst toggleComments = ({ mdl, key, level }) =>\n  mdl.state.comment[`${key}-${level}`]\n    ? (mdl.state.comment[`${key}-${level}`] = !mdl.state.comment[\n        `${key}-${level}`\n      ])\n    : (mdl.state.comment[`${key}-${level}`] = true)\n\nconst toggleModal = (mdl) => (mdl.state.showModal = !mdl.state.showModal)\nconst togglePopover = (e, mdl) => {\n  mdl.state.event = e\n  mdl.state.showPopover = !mdl.state.showPopover\n}\n\nconst toggleUser = (mdl) => (id, e) => {\n  mdl.state.user.id = id\n  // mdl.state.showUser = !mdl.state.showUser\n  mdl.state.event = e\n  mdl.modal.title(`User: ${id}`)\n  mdl.modal.contents(UserModel.contents(mdl))\n  mdl.modal.init = (mdl) => UserModel.init(mdl)\n  mdl.toggleModal(mdl)\n}\n\nconst modal = {\n  title: Stream(null),\n  contents: Stream(),\n  init: (mdl) => {},\n  close: () => {},\n}\n\nconst markup = new MarkdownIt({\n  html: true,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: \"\",\n  linkify: true,\n  typographer: true,\n  quotes: \"“”‘’\",\n})\n\nexport const model = {\n  markup,\n  modal,\n  getPosts,\n  getComments: getDataById,\n  getUser: getDataById,\n  routes,\n  getPath,\n  reqs,\n  data: {},\n  state,\n  toggleComments,\n  toggleModal,\n  togglePopover,\n  toggleUser,\n}\n","import Comment from \"./../components/comment.js\"\n\nconst Comments = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => {\n      mdl.data[mdl.state.route] = {}\n      const onSuccess = (mdl) => (data) => (mdl.data[mdl.state.route] = data)\n      const onError = (mdl) => (e) => console.log(\"error\", mdl, e)\n      mdl\n        .getComments(mdl, mdl.state.route, mdl.state.id())\n        .then(onSuccess(mdl), onError(mdl))\n    },\n    view: ({ attrs: { mdl } }) => {\n      let route = mdl.state.route\n      let data = mdl.data[route]\n      return [\n        !data.comments\n          ? m(\"ion-progress-bar[type='indeterminate']\")\n          : m(\n              \"ion-list\",\n              {\n                route,\n              },\n              data.length && m(\"ion-progress-bar[type='indeterminate']\"),\n              m(\n                \"ion-refresher\",\n                {\n                  onionRefresh: (e) => {\n                    setTimeout(() => {\n                      console.log(\"Async operation has ended\")\n                      e.target.complete()\n                    }, 2000)\n                  },\n                  slot: \"fixed\",\n                },\n                m(\"ion-refresher-content\", {\n                  pullingIcon: \"chevron-down-circle-outline\",\n                  loadingSpinner: \"bubbles\",\n                  pullingText: \"Pull to refresh\",\n                  closeDuration: \"280ms\",\n                })\n              ),\n\n              data.comments.map((c, idx) =>\n                m(Comment, {\n                  key: idx,\n                  comment: c,\n                  mdl,\n                })\n              )\n            ),\n      ]\n    },\n  }\n}\n\nexport default Comments\n","import Post from \"./../components/post.js\"\n\nconst Posts = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => {\n      mdl.state.id(null)\n      mdl.data.item = null\n      if (!mdl.data[mdl.state.route]) {\n        mdl.data[mdl.state.route] = { data: [], page: 1, pos: 0 }\n        const onSuccess = (mdl) => (data) =>\n          (mdl.data[mdl.state.route].data = data)\n        const onError = (mdl) => (e) => console.log(\"error\", mdl, e)\n        mdl.getPosts(mdl, mdl.state.route).then(onSuccess(mdl), onError(mdl))\n      }\n    },\n    view: ({ attrs: { mdl } }) => {\n      let route = mdl.state.route\n      let page = mdl.data[route]\n      let data = page.data\n      return m(\n        \"ion-content\",\n        {\n          oncreate: ({ dom }) => dom.scrollToPoint(0, page.pos),\n          id: \"me\",\n          route,\n          scrollEvents: true,\n          onionScroll: ({ detail: { currentY } }) => (page.pos = currentY),\n        },\n        [\n          !data\n            ? m(\"ion-progress-bar[type='indeterminate']\")\n            : m(\n                \"ion-list\",\n\n                m(\n                  \"ion-refresher\",\n                  {\n                    onionRefresh: (e) => {\n                      setTimeout(() => {\n                        console.log(\"Async operation has ended\")\n                        e.target.complete()\n                      }, 2000)\n                    },\n                    slot: \"fixed\",\n                  },\n                  m(\"ion-refresher-content\", {\n                    pullingIcon: \"chevron-down-circle-outline\",\n                    loadingSpinner: \"bubbles\",\n                    pullingText: \"Pull to refresh\",\n                    closeDuration: \"280ms\",\n                  })\n                ),\n                data.map((_post, idx) =>\n                  m(Post, {\n                    key: idx,\n                    post: _post,\n                    mdl,\n                  })\n                ),\n                m(\n                  \"ion-infinite-scroll\",\n                  {\n                    onionInfinite: (e) => {\n                      mdl.data[mdl.state.route].page++\n                      const onSuccess = (mdl) => (data) => {\n                        data.length == 0\n                          ? mdl.data[mdl.state.route].page--\n                          : (mdl.data[mdl.state.route].data = mdl.data[\n                              mdl.state.route\n                            ].data.concat(data))\n                        e.target.complete()\n                      }\n                      const onError = (mdl) => (e) => {\n                        console.log(\"error\", mdl, e)\n                        e.target.complete()\n                      }\n\n                      mdl\n                        .getPosts(mdl, mdl.state.route)\n                        .then(onSuccess(mdl), onError(mdl))\n                    },\n                    threshold: \"100px\",\n                    id: \"infinite-scroll\",\n                  },\n                  m(\"ion-infinite-scroll-content\", {\n                    loadingSpinner: \"bubbles\",\n                    loadingText: \"fetching more data\",\n                  })\n                )\n              ),\n        ]\n      )\n    },\n  }\n}\n\nexport default Posts\n","export const animateComponentEntrance = idx => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  return setTimeout(() => {\r\n    dom.classList.toggle('expandOpen')\r\n    dom.style.opacity = 1\r\n  }, idx * 100 + 20)\r\n}\r\n\r\nexport const animateHeaderEntrance = ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  dom.classList.toggle('slideRight')\r\n  dom.style.opacity = 1\r\n}\r\n\r\nexport const animateModalEntrance = ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  dom.classList.toggle('expandOpen')\r\n  dom.style.opacity = 1\r\n}\r\n\r\nexport const animateFooterEntrance = ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  dom.classList.toggle('slideLeft')\r\n  dom.style.opacity = 1\r\n}\r\n\r\nexport const animateChildrenEntrance = ({ dom }) => {\r\n  let children = [ ...dom.children ]\r\n\r\n  return children.map((child, idx) => {\r\n    child.style.opacity = 0\r\n    setTimeout(() => {\r\n      child.classList.toggle('slideRight')\r\n      child.style.opacity = 1\r\n    }, (idx + 1) * 10)\r\n  })\r\n}\r\n\r\nexport const animateChildrenLimitsEntrance = idx => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle('slideDown')\r\n    dom.style.opacity = 1\r\n  }, (idx + 1) * 200)\r\n}\r\n\r\nexport const animate = dir => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle(dir)\r\n    dom.style.opacity = 1\r\n  },  200)\r\n}\r\n\r\nexport const slideOutAnimation = ({dom} ) => {\r\n  console.log(dom)\r\n  return new Promise(() => {\r\n    dom.classList.remove('expandOpen')\r\n    return setTimeout(()=> {\r\n      dom.style.opacity = 0\r\n      // dom.classList.add('reverseAnimation', 'hatch')\r\n    } , 200)\r\n  })\r\n}\r\n\r\n\r\nexport const animateChildrenLimitsExit = ({ dom }) =>\r\n  new Promise(() => {\r\n    [ ...dom.children ].reverse().map((child, idx) => {\r\n      return setTimeout(() => {\r\n        child.style.display = 'none'\r\n      }, idx * 100)\r\n    })\r\n  })\r\n\r\n","export * from \"./animations.js\"\r\n"]}